<!--
  ~ Copyright (c) 2020 Pragma Edge Inc
  ~
  ~ Licensed under the Pragma Edge Inc
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~ https://pragmaedge.com/licenseagreement
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<div class="pcm-content centralize partner">
  <mat-card>
    <h3 class="d-flex align-items-center">
      <span>{{"REPORTS.997_OVERDUE_REPORT" | translate}}</span>
    </h3>

    <mat-card >
      <form [formGroup]="form" class="form__container">
        <mat-form-field>
          <input matInput class="pcm-date-field" [owlDateTime]="from" [owlDateTimeTrigger]="from"
                 placeholder='{{"REPORTS.FIELDS.FILE_ARRIVED_FROM.LABEL" | translate}}'
                 formControlName="dateRangeStart" name="dateRangeStart">
          <owl-date-time #from></owl-date-time>
        </mat-form-field>

        <mat-form-field>
          <input matInput class="pcm-date-field" [owlDateTime]="to" [owlDateTimeTrigger]="to"
                 placeholder='{{"REPORTS.FIELDS.FILE_ARRIVED_TO.LABEL" | translate}}'
                 formControlName="dateRangeEnd" name="dateRangeEnd">
          <owl-date-time #to></owl-date-time>
        </mat-form-field>

        <mat-form-field>
          <input matInput placeholder='{{"REPORTS.FIELDS.PARTNER.LABEL" | translate}}' formControlName="partner" name="partner" />
        </mat-form-field>

        <mat-form-field>
          <input matInput placeholder='{{"REPORTS.FIELDS.TRANSACTION.LABEL" | translate}}' formControlName="docTrans"  name="docTrans" />
        </mat-form-field>

        <mat-form-field>
          <input matInput placeholder='{{"REPORTS.FIELDS.DEST_FILE_NAME.LABEL" | translate}}' formControlName="destFileName"  name="destFileName" />
        </mat-form-field>

        <mat-form-field>
          <input matInput placeholder='{{"REPORTS.FIELDS.STATUS.LABEL" | translate}}' formControlName="status"  name="status" />
        </mat-form-field>

        <mat-form-field>
          <input matInput placeholder='{{"REPORTS.FIELDS.SENDER_ID.LABEL" | translate}}' formControlName="senderId"  name="senderId" />
        </mat-form-field>

        <mat-form-field>
          <input matInput placeholder='{{"REPORTS.FIELDS.RECEIVER_ID.LABEL" | translate}}' formControlName="receiverId"  name="receiverId" />
        </mat-form-field>

        <mat-form-field>
          <input matInput placeholder='{{"REPORTS.FIELDS.GROUP_COUNT.LABEL" | translate}}' formControlName="groupCount"  name="groupCount" />
        </mat-form-field>
      </form>
    </mat-card>

    <div class="btn-grp sbmt-btn mt-3">
      <button type="button" class="btn btn-primary" (click)="submit(form.value)">
        {{"REPORTS.BUTTONS.SEARCH" | translate}}
      </button>
      <button type="button" class="btn btn-info" (click)="reset()">{{"REPORTS.BUTTONS.RESET_SEARCH" | translate}}</button>
    </div>
  </mat-card>

  <mat-card *ngIf="showResults" class="mt-3">
    <app-pcm-table (columnsChanged)="columnsChanged($event)" (pagination)="pagination($event)" (sortChange)="sort($event)"
                   [actionMenu]="actionButtons" [currentPage]="currentPage"
                   [dataSource]="searchResults" [displayedColumns]="displayedColumns"
                   [headerColumns]="headerColumns" [page]="'over_due reports'"
                   [serachTblConfigRef]="serachTblConfigRef" [searchTblConfig]="serachTblConfig" [size]="qryParams.size"
                   [sortBy]='sortBy'
                   [sortDir]='sortDir' [totalElements]='totalElements' [totalPages]='totalPages'>
    </app-pcm-table>
  </mat-card>
</div>
